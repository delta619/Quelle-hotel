<!DOCTYPE html>
<html lang="en">
<head>
    <title>MyTravelAdvisor</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script>
        // onclick
        function logout() {
            $.ajax({
                url: "/logout",
                type: "GET",
                success: function (data) {
                    window.location.href = "/login";
                }
            });
        }
        // hit an api for findHotels and display the results
        // disbale the button findHotels after click untill response
        // enable the button findHotels after response
        // show loading image while waiting for response

        // send ajax request to /hotel?sub=hotelText
        // get the response and display it in the table
        // if no hotels found display "No hotels found"
        // if error display "Error occured"

        function findHotels(){
            var hotelText = document.getElementById("hotelText").value;
            $.ajax({
                url: "/hotels?sub="+hotelText,
                type: "GET",
                success: function (data) {
                    var table = document.getElementById("hotelTable");
                    table.innerHTML = "";
                    if(data.success == false){
                        table.innerHTML = "No hotels found";
                    }else{
                        for(var i=0;i<data.hotels.length;i++){
                            var row = table.insertRow(i);
                            var cell1 = row.insertCell(0);
                            var cell2 = row.insertCell(1);
                            var cell3 = row.insertCell(2);

                            cell1.innerHTML = data.hotels[i].hotelId;
                            cell2.innerHTML = data.hotels[i].name;
                            cell3.innerHTML = data.hotels[i].city;

                        }
                    }
                },
                error: function (data) {
                    var table = document.getElementById("hotelTable");
                    table.innerHTML = "Error occurred";
                }
            });
        }

    </script>
</head>
<body>

<div class="jumbotron text-center">
    <h1>Hello Prof. Olga </h1>
    #if($loggedUser != "anonymous")
      <h5>Hello, $loggedUser </h5>
    #end
</div>
<div class="container">

    <div class="row">
        <label for="findHotels">Find Hotels:</label>
        <input type="text" id = "hotelText" placeholder="Enter hotel text" width="200px">
        <input type="button" id = "findHotels" class="btn btn-primary" value="findHotels" onclick="findHotels()">
    </div>

    <div class="row">
        <table class="table table-striped" id="hotelTable">
        </table>
    </div>



    <div class="row">
        <div class="col-sm-4">
            <button onclick="logout()">Logout</button>
        </div>
    </div>
</div>
</body>
</html>
